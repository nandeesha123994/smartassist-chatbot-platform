{% extends 'base.html' %}
{% block title %}Dashboard - ChatAI Platform{% endblock %}
{% block content %}
<div class="dashboard-header" style="margin-bottom: 3rem;">
  <h1 style="font-size: 2.5rem; margin-bottom: 0.5rem;">Agent Dashboard</h1>
  <p style="color: var(--text-secondary);">Manage and monitor your specialized AI orchestration units.</p>
</div>
<div class="stats-banner">
  <div class="stat-item">
    <div class="stat-icon"><i data-lucide="layers"></i></div>
    <div class="stat-details">
      <h5>Active Agents</h5>
      <p>{{ total_projects }}</p>
    </div>
  </div>
  <div style="width: 1px; background: var(--glass-border); height: 40px; align-self: center;"></div>
  <div class="stat-item">
    <div class="stat-icon"><i data-lucide="message-circle"></i></div>
    <div class="stat-details">
      <h5>Total Queries</h5>
      <p>{{ total_messages }}</p>
    </div>
  </div>
  <div class="status-badge">
    <div class="status-dot"></div> AI ENGINE: ONLINE
  </div>
</div>
<div style="display: grid; grid-template-columns: 2fr 1fr; gap: 3rem; align-items: start;">
  <div class="projects-section">
    <div class="section-title"
      style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 2rem; color: var(--text-primary);">
      <i data-lucide="bot"></i>
      <h2 style="font-size: 1.5rem;">Your Deployed Agents</h2>
      <span
        style="background: var(--accent-glow); color: var(--accent-color); padding: 0.2rem 0.6rem; border-radius: 1rem; font-size: 0.8rem; font-weight: 600;">TEST_COUNT
        {{ total_projects|default:0 }}</span>
    </div>
    <div class="project-grid">
      {% for project in projects %}
      <div class="card project-card">
        <div class="project-icon-container icon-v{% cycle '1' '2' '3' '4' %}"><i data-lucide="sparkles"
            style="color: white; width: 24px; height: 24px;"></i></div>
        <h3>{{ project.name }}</h3>
        <p>{{ project.description|default:"Ready to assist with your specialized tasks."|truncatewords:20 }}</p>
        <div style="margin-top: 1.5rem; display: flex; gap: 0.75rem;">
          <a href="{% url 'project_detail' project.id %}" class="btn-primary"
            style="flex: 1; text-decoration: none;"><span>Configure</span> <i data-lucide="settings"
              style="width: 16px;"></i></a>
          <a href="{% url 'chat' project.id %}" class="btn-primary"
            style="background: rgba(255,255,255,0.05); box-shadow: none; border: 1px solid var(--glass-border); text-decoration: none;"><i
              data-lucide="message-square" style="width: 18px; color: var(--text-primary);"></i></a>
        </div>
      </div>
      {% empty %}
      <div class="card" style="grid-column: 1 / -1; text-align: center; padding: 4rem 2rem;">
        <i data-lucide="folder-plus"
          style="width: 48px; height: 48px; color: var(--text-secondary); margin-bottom: 1rem;"></i>
        <h3 style="color: var(--text-secondary);">No agents found</h3>
        <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">Create your first AI agent on the right to get
          started.</p>
      </div>
      {% endfor %}
    </div>
  </div>
  <aside class="create-section">
    <div class="card" style="position: sticky; top: 100px;">
      <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1.5rem;">
        <i data-lucide="sparkles" style="color: var(--accent-color); width: 24px;"></i>
        <h3 style="margin: 0;">Forge New Agent</h3>
      </div>
      <form method="post">{% csrf_token %}{{ form.as_p }}<button type="submit" class="btn-primary"
          style="width: 100%; margin-top: 1rem;"><span>Initialize Agent</span> <i data-lucide="plus"
            style="width: 18px;"></i></button></form>
    </div>
  </aside>
</div>
{% endblock %}